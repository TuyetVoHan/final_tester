{% extends "base.html" %} {% block content %}
<h2 class="title">Manage Tables for: {{ restaurant.name }}</h2>
<p class="subtitle">Restaurant ID: {{ restaurant.restaurant_id }}</p>

<div class="columns">
  <div class="column is-half">
    <div class="box">
      <h3 class="title is-5">Add New Table</h3>
      <form method="post">
        <div class="field">
          <label class="label">Table Number / Name</label>
          <div class="control">
            <input
              class="input"
              type="text"
              name="table_number"
              placeholder="e.g., T1, Booth 5"
              required
            />
          </div>
        </div>
        <div class="field">
          <label class="label">Capacity</label>
          <div class="control">
            <input
              class="input"
              type="number"
              name="capacity"
              placeholder="e.g., 4"
              min="1"
              required
            />
          </div>
        </div>
        <div class="control">
          <button class="button is-primary">Add Table</button>
        </div>
      </form>
    </div>
  </div>

  <div class="column is-half">
    <div class="box">
      <h3 class="title is-5">Existing Tables</h3>
      {% if tables %}
      <table class="table is-fullwidth is-striped">
        <thead>
          <tr>
            <th>Table Number</th>
            <th>Capacity</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for table in tables %}
          <tr>
            <td>{{ table.table_number }}</td>
            <td>{{ table.capacity }}</td>
            <td>
              <form
                action="{{ url_for('admin_delete_table', rid=restaurant.restaurant_id, table_id=table.table_id) }}"
                method="post"
                onsubmit="return confirm('Are you sure you want to delete this table?');"
                style="display: inline"
              >
                <button class="button is-danger is-small">Delete</button>
              </form>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No tables have been added for this restaurant yet.</p>
      {% endif %}
    </div>
  </div>
</div>

<a href="{{ url_for('admin_restaurants') }}" class="button is-light"
  >← Back to Restaurants</a
>
{% endblock %}
